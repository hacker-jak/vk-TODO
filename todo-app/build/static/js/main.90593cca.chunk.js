(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{15:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),c=n(8),a=n.n(c),r=n(2),o=n(3),u=n(6),h=n(5),d=n(9),l=n(4),p=n.n(l),v=n(0);function j(e){return Object(v.jsx)("button",{className:"remove_btn",onClick:e.OnClick,children:"Remove"})}function b(e){var t=Object(s.useState)(),n=Object(d.a)(t,2),i=n[0],c=n[1];return Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.OnSubmit(i),c("")},children:[Object(v.jsx)("input",{type:"text",name:"item",value:i,onChange:function(e){return c(e.target.value)}}),Object(v.jsx)("input",{type:"submit",value:"Add",className:"add_btn"})]})}function m(e){return Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.OnSubmit()},children:[Object(v.jsx)("input",{type:"submit",value:"Save",className:"save_btn"}),e.Saved&&Object(v.jsx)("span",{children:"\u2713"})]})}var f=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"todo-item",children:[Object(v.jsx)("input",{type:"checkbox",checked:this.props.checked,onChange:function(){return e.props.OnCheck(!e.props.checked,e.props.index)}},this.props.index),this.props.value]})}}]),n}(i.a.Component),O=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;Object(r.a)(this,n);var i=(s=t.call(this,e)).props.items,c=0;return i.forEach((function(e,t){e[1]&&(c+=1)})),s.state={items:i,count:c,saveFunc:e.saveFunc,saved:!0},s}return Object(o.a)(n,[{key:"makeItem",value:function(e,t,n){var s=this;return Object(v.jsx)(f,{index:t,value:e,checked:n,OnCheck:function(e,t){return s.handleCheck(e,t)}})}},{key:"handleRemove",value:function(e){var t=this.state.items;if(t[e][1]){var n=this.state.count-1;this.setState({count:n})}t.splice(e,1),this.setState({items:t,saved:!1})}},{key:"handleAdd",value:function(e){var t=this.state.items;t.push([e,!1]),this.setState({items:t,saved:!1})}},{key:"handleCheck",value:function(e,t){var n=this.state.items,s=this.state.count;e?(n[t][1]=!0,s+=1):(n[t][1]=!1,s-=1),this.setState({count:s,item_list:n,saved:!1})}},{key:"handleSave",value:function(){var e=this;this.props.saveFunc(this.state.items).then((function(t){e.setState({saved:!0})})).catch((function(e){return console.log("handleSave() encountered an error")}))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"todo-list",children:[Object(v.jsxs)("h2",{children:["Complete: ",this.state.count,"/",this.state.items.length]}),Object(v.jsx)("ul",{children:this.state.items.map((function(t,n){return Object(v.jsxs)("div",{children:[" ",e.makeItem(t[0],n,t[1])," ",Object(v.jsx)(j,{OnClick:function(){return e.handleRemove(n)}})]})}))}),Object(v.jsx)(b,{OnSubmit:function(t){return e.handleAdd(t)}}),Object(v.jsx)(m,{Saved:this.state.saved,OnSubmit:function(){return e.handleSave()}})]})}}]),n}(i.a.Component),k=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).appId="7786895",s.scope="friends",s.id="12345",s.state={error:null,isLoaded:!1,items:[]},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;p.a.send("VKWebAppInit",{}),p.a.send("VKWebAppGetUserInfo").then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),p.a.send("VKWebAppGetAuthToken",{app_id:this.appId,scope:this.scope}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),this.url="https://darkjakeco.pythonanywhere.com/",fetch(this.url+this.id).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,items:t.list})}),(function(t){e.setState({isLoaded:!1,error:t})}))}},{key:"saveFunc",value:function(e){var t={list:e},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},s=this.url+"save/"+this.id;return new Promise((function(e,t){fetch(s,n).then((function(t){t.ok&&e(!0)})).catch((function(e){console.log(e),t(!1)}))}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoaded,s=e.items;return t?Object(v.jsxs)("div",{children:["Error: ",t.message]}):n?Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("header",{className:"App-header",children:[Object(v.jsx)("h1",{children:"TODO List"}),Object(v.jsx)(O,{saveFunc:this.saveFunc.bind(this),items:s})]})}):Object(v.jsx)("div",{children:"Loading..."})}}]),n}(i.a.Component);a.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(k,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.90593cca.chunk.js.map